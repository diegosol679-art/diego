<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DIEGO'S SPACE ‚òÖ film journal</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=VT323&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --magenta: #ff2d78;
  --cyan: #00f5ff;
  --yellow: #fff200;
  --green: #39ff14;
  --dark: #080810;
  --darker: #04040a;
  --card: rgba(12,12,28,0.92);
  --border: rgba(255,45,120,0.6);
  --glow-m: 0 0 20px #ff2d78, 0 0 40px rgba(255,45,120,0.4);
  --glow-c: 0 0 20px #00f5ff, 0 0 40px rgba(0,245,255,0.4);
}

* { margin:0; padding:0; box-sizing:border-box; }

::selection { background: var(--magenta); color: #000; }

body {
  font-family: 'Space Mono', monospace;
  background: var(--darker);
  color: #fff;
  overflow-x: hidden;
  cursor: crosshair;
}

/* ‚îÄ‚îÄ‚îÄ SCANLINE OVERLAY ‚îÄ‚îÄ‚îÄ */
body::before {
  content:'';
  position:fixed;
  inset:0;
  background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.08) 2px, rgba(0,0,0,0.08) 4px);
  pointer-events:none;
  z-index:9999;
}

/* ‚îÄ‚îÄ‚îÄ CANVAS BG ‚îÄ‚îÄ‚îÄ */
#bg { position:fixed; inset:0; z-index:-1; }

/* ‚îÄ‚îÄ‚îÄ ENTRY SCREEN ‚îÄ‚îÄ‚îÄ */
#entry {
  position:fixed; inset:0; z-index:10000;
  background: #000;
  display:flex; align-items:center; justify-content:center; flex-direction:column;
  gap:30px;
}
#entry h1 {
  font-family:'Bebas Neue',sans-serif;
  font-size: clamp(4rem, 12vw, 10rem);
  letter-spacing: 0.05em;
  background: linear-gradient(135deg, var(--magenta), var(--cyan), var(--yellow));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: huerot 4s linear infinite;
  filter: drop-shadow(0 0 30px #ff2d78);
}
@keyframes huerot { to { filter: drop-shadow(0 0 30px #00f5ff) hue-rotate(360deg); } }

#entry p {
  font-family:'VT323',monospace;
  font-size:1.8rem;
  color: var(--cyan);
  text-shadow: var(--glow-c);
  letter-spacing:0.3em;
  animation: blink 1.2s steps(1) infinite;
}
@keyframes blink { 50% { opacity:0; } }

#enterBtn {
  font-family:'VT323',monospace;
  font-size:2.5rem;
  padding: 15px 60px;
  background: transparent;
  border: 3px solid var(--magenta);
  color: var(--magenta);
  cursor: pointer;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  box-shadow: var(--glow-m);
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
}
#enterBtn::before {
  content:'';
  position:absolute;
  inset:0;
  background: var(--magenta);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.3s;
  z-index:-1;
}
#enterBtn:hover { color:#000; text-shadow:none; }
#enterBtn:hover::before { transform: scaleX(1); }

/* ‚îÄ‚îÄ‚îÄ SITE WRAPPER ‚îÄ‚îÄ‚îÄ */
#site { display:none; }

/* ‚îÄ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ */
nav {
  position: sticky;
  top: 0;
  z-index: 500;
  background: rgba(4,4,10,0.97);
  border-bottom: 2px solid var(--magenta);
  box-shadow: 0 2px 30px rgba(255,45,120,0.3);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 25px;
  height: 60px;
}
.nav-logo {
  font-family:'Bebas Neue',sans-serif;
  font-size: 2rem;
  letter-spacing: 0.08em;
  color: var(--magenta);
  text-shadow: var(--glow-m);
}
.nav-tabs {
  display: flex;
  gap: 5px;
}
.tab-btn {
  font-family:'VT323',monospace;
  font-size: 1.3rem;
  padding: 8px 18px;
  background: transparent;
  border: 2px solid transparent;
  color: #888;
  cursor: pointer;
  letter-spacing: 0.1em;
  transition: all 0.2s;
  text-transform: uppercase;
}
.tab-btn:hover { color: var(--cyan); border-color: rgba(0,245,255,0.4); }
.tab-btn.active {
  color: var(--cyan);
  border-color: var(--cyan);
  box-shadow: var(--glow-c);
  background: rgba(0,245,255,0.05);
}

/* ‚îÄ‚îÄ‚îÄ CONTENT ‚îÄ‚îÄ‚îÄ */
.tab-pane { display:none; padding:30px 25px; max-width:1400px; margin:0 auto; }
.tab-pane.active { display:block; }

/* ‚îÄ‚îÄ‚îÄ SECTION TITLE ‚îÄ‚îÄ‚îÄ */
.sec-title {
  font-family:'Bebas Neue',sans-serif;
  font-size: clamp(2.5rem, 5vw, 4rem);
  letter-spacing:0.05em;
  margin-bottom: 30px;
  position: relative;
  display: inline-block;
}
.sec-title::after {
  content:'';
  display:block;
  height: 4px;
  background: linear-gradient(90deg, var(--magenta), transparent);
  margin-top: 5px;
}
.sec-title.cyan { color: var(--cyan); text-shadow: var(--glow-c); }
.sec-title.cyan::after { background: linear-gradient(90deg, var(--cyan), transparent); }
.sec-title.magenta { color: var(--magenta); text-shadow: var(--glow-m); }

/* ‚îÄ‚îÄ‚îÄ HOME TAB ‚îÄ‚îÄ‚îÄ */
.home-grid {
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 25px;
}
@media(max-width:768px){ .home-grid { grid-template-columns:1fr; } }

.profile-card {
  background: var(--card);
  border: 2px solid var(--border);
  box-shadow: var(--glow-m);
  padding: 25px;
  position: relative;
  overflow: hidden;
}
.profile-card::before {
  content:'';
  position:absolute;
  top:-50%; left:-50%;
  width:200%; height:200%;
  background: conic-gradient(from 0deg, transparent, rgba(255,45,120,0.05), transparent 30%);
  animation: spin 8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.avatar-wrap {
  width: 160px;
  height: 160px;
  margin: 0 auto 20px;
  position: relative;
}
.avatar-wrap::before, .avatar-wrap::after {
  content:'';
  position:absolute;
  inset:-4px;
  border-radius: 50%;
  background: conic-gradient(var(--magenta), var(--cyan), var(--yellow), var(--magenta));
  animation: spin 3s linear infinite;
  z-index:-1;
}
.avatar-wrap::after { inset:-8px; opacity:0.3; }
.avatar {
  width:100%;
  height:100%;
  border-radius:50%;
  object-fit:cover;
  border: 4px solid var(--dark);
  display:block;
  background: linear-gradient(135deg, #1a0030, #003040);
  position:relative;
  z-index:1;
}
.avatar-placeholder {
  width:100%; height:100%;
  border-radius:50%;
  background: linear-gradient(135deg, #1a0030, #003040);
  display:flex; align-items:center; justify-content:center;
  font-size:4rem;
  border: 4px solid var(--dark);
  position:relative; z-index:1;
}

.profile-name {
  font-family:'Bebas Neue',sans-serif;
  font-size:2.4rem;
  text-align:center;
  color: var(--magenta);
  text-shadow: var(--glow-m);
  letter-spacing:0.05em;
}
.profile-handle {
  text-align:center;
  color: #555;
  font-size:0.8rem;
  margin-bottom:20px;
}
.profile-bio {
  font-size:0.85rem;
  line-height:1.7;
  color:#ccc;
  margin-bottom:20px;
  border-left:3px solid var(--magenta);
  padding-left:12px;
}
.profile-stats {
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap:10px;
  text-align:center;
}
.stat-box {
  background: rgba(255,45,120,0.08);
  border:1px solid rgba(255,45,120,0.3);
  padding:12px 8px;
}
.stat-num {
  font-family:'Bebas Neue',sans-serif;
  font-size:2rem;
  color: var(--yellow);
  display:block;
  line-height:1;
}
.stat-lbl { font-size:0.65rem; color:#666; letter-spacing:0.1em; text-transform:uppercase; }

.now-playing {
  background: var(--card);
  border: 2px solid rgba(57,255,20,0.5);
  box-shadow: 0 0 20px rgba(57,255,20,0.2);
  padding: 18px;
  margin-top:20px;
}
.now-playing-label {
  font-family:'VT323',monospace;
  font-size:1.1rem;
  color: var(--green);
  letter-spacing:0.15em;
  margin-bottom:10px;
  display:flex; align-items:center; gap:8px;
}
.dot-pulse {
  width:10px; height:10px; border-radius:50%;
  background: var(--green);
  box-shadow: 0 0 10px var(--green);
  animation: pulse 1.5s ease-in-out infinite;
}
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1);} 50%{opacity:0.3;transform:scale(0.7);} }
.np-track { font-size:0.78rem; color:#bbb; white-space:nowrap; overflow:hidden; }
.np-track span { display:inline-block; animation: marquee 15s linear infinite; }
@keyframes marquee { 0%{transform:translateX(100%);} 100%{transform:translateX(-100%);} }

/* ‚îÄ‚îÄ‚îÄ HOME RIGHT ‚îÄ‚îÄ‚îÄ */
.home-right { display:flex; flex-direction:column; gap:25px; }

.widget {
  background: var(--card);
  border: 2px solid rgba(0,245,255,0.3);
  padding: 25px;
  position:relative;
}
.widget-title {
  font-family:'VT323',monospace;
  font-size:1.4rem;
  color: var(--cyan);
  letter-spacing:0.15em;
  text-transform:uppercase;
  margin-bottom:18px;
  border-bottom:1px solid rgba(0,245,255,0.2);
  padding-bottom:10px;
}

.recent-films {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
  gap:12px;
}
.recent-film-card {
  position:relative;
  cursor:pointer;
  overflow:hidden;
  border:2px solid transparent;
  transition: all 0.3s;
}
.recent-film-card:hover {
  border-color: var(--magenta);
  box-shadow: var(--glow-m);
  transform: translateY(-4px) scale(1.03);
}
.recent-film-card img {
  width:100%; aspect-ratio:2/3; object-fit:cover; display:block;
}
.recent-film-card .poster-placeholder {
  width:100%; aspect-ratio:2/3;
  background: linear-gradient(135deg, #1a0030 0%, #003040 50%, #001a20 100%);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:6px; padding:8px; text-align:center;
}
.recent-film-card .poster-placeholder .film-emoji { font-size:1.5rem; }
.recent-film-card .poster-placeholder .film-title-small { font-size:0.55rem; color:#aaa; letter-spacing:0.05em; line-height:1.3; }
.film-rating-badge {
  position:absolute; bottom:0; left:0; right:0;
  background: linear-gradient(transparent, rgba(0,0,0,0.9));
  padding:15px 6px 6px;
  text-align:center;
}
.stars-small { color: var(--yellow); font-size:0.7rem; letter-spacing:1px; }

.blog-preview {
  display:flex; flex-direction:column; gap:15px;
}
.blog-entry {
  border-left:3px solid var(--magenta);
  padding-left:15px;
  cursor:pointer;
  transition: all 0.2s;
}
.blog-entry:hover { border-color: var(--cyan); transform:translateX(4px); }
.blog-date { font-size:0.7rem; color:#555; letter-spacing:0.1em; }
.blog-entry h4 { font-size:0.9rem; color:var(--magenta); margin:4px 0; }
.blog-entry p { font-size:0.78rem; color:#888; line-height:1.5; }

/* ‚îÄ‚îÄ‚îÄ FILMS TAB ‚îÄ‚îÄ‚îÄ */
.films-toolbar {
  display:flex; gap:15px; margin-bottom:25px; flex-wrap:wrap; align-items:center;
}
#movieSearch {
  flex:1; min-width:200px;
  padding:12px 18px;
  background: rgba(255,255,255,0.05);
  border: 2px solid rgba(255,45,120,0.4);
  color:#fff;
  font-family:'Space Mono',monospace;
  font-size:0.9rem;
  outline:none;
  transition: border-color 0.2s;
}
#movieSearch:focus { border-color: var(--magenta); box-shadow: var(--glow-m); }
#movieSearch::placeholder { color:#444; }

.filter-btn {
  padding:12px 20px;
  background:transparent;
  border: 2px solid rgba(0,245,255,0.4);
  color: var(--cyan);
  font-family:'VT323',monospace;
  font-size:1.2rem;
  cursor:pointer;
  letter-spacing:0.1em;
  transition: all 0.2s;
  text-transform:uppercase;
}
.filter-btn:hover, .filter-btn.active {
  background: rgba(0,245,255,0.1);
  border-color: var(--cyan);
  box-shadow: var(--glow-c);
}

.movie-grid {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap:16px;
}
.movie-card {
  background: var(--card);
  border: 2px solid rgba(255,255,255,0.08);
  overflow:hidden;
  position:relative;
  cursor:pointer;
  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
  group:true;
}
.movie-card:hover {
  border-color: var(--magenta);
  transform: translateY(-6px);
  box-shadow: var(--glow-m);
  z-index:5;
}
.movie-card .poster {
  width:100%; aspect-ratio:2/3; object-fit:cover; display:block;
}
.movie-card .poster-ph {
  width:100%; aspect-ratio:2/3;
  background: linear-gradient(160deg, #1a0030 0%, #0a001a 40%, #001830 100%);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:8px; padding:12px; text-align:center;
}
.movie-card .poster-ph .big-emoji { font-size:2.5rem; }
.movie-card .poster-ph .ph-title { font-size:0.7rem; color:#999; line-height:1.4; }
.movie-overlay {
  position:absolute; inset:0;
  background: linear-gradient(transparent 40%, rgba(0,0,0,0.95) 100%);
  display:flex; flex-direction:column; justify-content:flex-end;
  padding:12px;
  opacity:0; transition: opacity 0.3s;
}
.movie-card:hover .movie-overlay { opacity:1; }
.movie-card-title {
  font-size:0.78rem;
  font-weight:700;
  line-height:1.3;
  margin-bottom:4px;
}
.movie-card-year { font-size:0.65rem; color:#aaa; margin-bottom:8px; }
.star-rating {
  display:flex; gap:3px;
}
.star-rating .star {
  font-size:1rem;
  color:#333;
  cursor:pointer;
  transition: all 0.15s;
}
.star-rating .star.lit { color: var(--yellow); filter: drop-shadow(0 0 4px var(--yellow)); }
.star-rating .star:hover { transform:scale(1.3); }

.movie-card .bottom-info {
  padding: 8px 10px;
  font-size:0.7rem;
  color:#777;
  display:flex; justify-content:space-between; align-items:center;
  border-top:1px solid rgba(255,255,255,0.05);
}
.bottom-info .genre-tag {
  font-size:0.6rem; padding:2px 8px;
  background:rgba(0,245,255,0.1);
  color:var(--cyan);
  border:1px solid rgba(0,245,255,0.3);
}

/* ‚îÄ‚îÄ‚îÄ DIARY TAB ‚îÄ‚îÄ‚îÄ */
.diary-timeline { position:relative; padding-left:40px; }
.diary-timeline::before {
  content:'';
  position:absolute; left:15px; top:0; bottom:0; width:2px;
  background: linear-gradient(180deg, var(--magenta), var(--cyan), var(--magenta));
  background-size: 100% 300%;
  animation: gradscroll 4s linear infinite;
}
@keyframes gradscroll { to { background-position: 0 -300%; } }

.diary-entry {
  position:relative;
  margin-bottom:35px;
}
.diary-entry::before {
  content:'‚òÖ';
  position:absolute;
  left:-32px; top:18px;
  font-size:1rem;
  color: var(--yellow);
  filter: drop-shadow(0 0 8px var(--yellow));
}
.diary-card {
  background: var(--card);
  border: 2px solid rgba(255,45,120,0.2);
  padding:20px;
  transition: all 0.3s;
}
.diary-card:hover {
  border-color: var(--magenta);
  box-shadow: var(--glow-m);
  transform:translateX(6px);
}
.diary-meta { display:flex; gap:15px; align-items:center; margin-bottom:12px; flex-wrap:wrap; }
.diary-date { font-family:'VT323',monospace; font-size:1.1rem; color: var(--cyan); }
.diary-film-title { font-weight:700; color:var(--magenta); }
.diary-stars { color:var(--yellow); letter-spacing:2px; }
.diary-review { font-size:0.82rem; line-height:1.8; color:#bbb; margin-top:10px; }
.diary-tags { display:flex; gap:6px; flex-wrap:wrap; margin-top:12px; }
.tag {
  font-family:'VT323',monospace;
  font-size:0.95rem;
  padding:2px 10px;
  border:1px solid rgba(255,45,120,0.4);
  color: rgba(255,45,120,0.9);
  letter-spacing:0.05em;
}

/* ‚îÄ‚îÄ‚îÄ WATCHLIST TAB ‚îÄ‚îÄ‚îÄ */
.watchlist-grid {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(130px,1fr));
  gap:14px;
}
.wl-card {
  position:relative; overflow:hidden; cursor:pointer;
  border: 2px solid rgba(0,245,255,0.15);
  transition: all 0.3s;
}
.wl-card:hover {
  border-color: var(--cyan);
  transform: translateY(-4px) scale(1.02);
  box-shadow: var(--glow-c);
}
.wl-card .poster-ph {
  width:100%; aspect-ratio:2/3;
  background: linear-gradient(160deg, #001030, #001a10);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:8px; padding:12px; text-align:center;
}
.wl-card .big-emoji { font-size:2rem; }
.wl-card .wl-title { font-size:0.65rem; color:#aaa; line-height:1.3; }
.wl-badge {
  position:absolute; top:8px; right:8px;
  background: var(--magenta);
  color:#000; font-size:0.6rem; font-weight:700;
  padding:2px 6px; letter-spacing:0.1em;
}

/* ‚îÄ‚îÄ‚îÄ GUESTBOOK ‚îÄ‚îÄ‚îÄ */
.guestbook-form {
  background: var(--card);
  border: 2px solid rgba(57,255,20,0.4);
  padding:25px;
  margin-bottom:30px;
}
.guestbook-form h3 {
  font-family:'VT323',monospace; font-size:1.6rem;
  color: var(--green); margin-bottom:15px; letter-spacing:0.1em;
}
.gb-inputs { display:grid; grid-template-columns:1fr 1fr; gap:15px; margin-bottom:15px; }
@media(max-width:600px){ .gb-inputs { grid-template-columns:1fr; } }
.gb-input {
  padding:12px;
  background: rgba(255,255,255,0.04);
  border: 2px solid rgba(57,255,20,0.2);
  color:#fff; font-family:'Space Mono',monospace; font-size:0.85rem;
  outline:none; transition: all 0.2s;
}
.gb-input:focus { border-color: var(--green); box-shadow: 0 0 15px rgba(57,255,20,0.2); }
.gb-textarea {
  width:100%; padding:12px;
  background: rgba(255,255,255,0.04);
  border: 2px solid rgba(57,255,20,0.2);
  color:#fff; font-family:'Space Mono',monospace; font-size:0.85rem;
  outline:none; resize:vertical; min-height:100px; transition: all 0.2s;
  margin-bottom:15px;
}
.gb-textarea:focus { border-color: var(--green); }
.gb-submit {
  font-family:'VT323',monospace; font-size:1.5rem;
  padding:10px 35px; background: var(--green);
  color:#000; border:none; cursor:pointer; letter-spacing:0.1em;
  transition: all 0.2s;
}
.gb-submit:hover { background: var(--yellow); transform: scale(1.05); }

.gb-entry {
  background: var(--card);
  border: 2px solid rgba(255,255,255,0.06);
  border-left: 4px solid var(--magenta);
  padding:20px; margin-bottom:15px;
  transition: all 0.2s;
}
.gb-entry:hover { border-color: rgba(255,45,120,0.5); box-shadow: 0 0 20px rgba(255,45,120,0.1); }
.gb-entry-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; flex-wrap:wrap; gap:8px; }
.gb-name { font-weight:700; color: var(--magenta); }
.gb-date { font-size:0.7rem; color:#444; }
.gb-text { font-size:0.82rem; color:#ccc; line-height:1.7; }
.gb-mood { font-size:1.2rem; }

/* ‚îÄ‚îÄ‚îÄ STATS TAB ‚îÄ‚îÄ‚îÄ */
.stats-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:20px; margin-bottom:35px; }
.stat-card {
  background: var(--card);
  border: 2px solid rgba(255,45,120,0.3);
  padding:25px; text-align:center;
  transition: all 0.3s; cursor:default;
}
.stat-card:hover { border-color: var(--magenta); box-shadow: var(--glow-m); transform:translateY(-3px); }
.stat-card .big-num {
  font-family:'Bebas Neue',sans-serif; font-size:4rem;
  color: var(--yellow); display:block; line-height:1;
  text-shadow: 0 0 20px rgba(255,242,0,0.5);
}
.stat-card .stat-desc { font-size:0.75rem; color:#666; letter-spacing:0.1em; text-transform:uppercase; margin-top:5px; }

.bar-chart { background: var(--card); border: 2px solid rgba(0,245,255,0.2); padding:25px; margin-bottom:25px; }
.bar-chart h3 { font-family:'VT323',monospace; font-size:1.4rem; color:var(--cyan); letter-spacing:0.15em; margin-bottom:20px; }
.bar-row { display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.bar-label { width:110px; font-size:0.72rem; color:#aaa; text-align:right; flex-shrink:0; }
.bar-track { flex:1; height:22px; background:rgba(255,255,255,0.05); position:relative; overflow:hidden; }
.bar-fill {
  height:100%; background: linear-gradient(90deg, var(--magenta), var(--cyan));
  position:relative; transition: width 1.5s cubic-bezier(0.4,0,0.2,1);
}
.bar-fill::after {
  content:''; position:absolute; inset:0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  animation: shimmer 2s linear infinite;
}
@keyframes shimmer { 0%{transform:translateX(-100%);} 100%{transform:translateX(100%);} }
.bar-val { width:35px; font-size:0.72rem; color:#777; flex-shrink:0; }

/* ‚îÄ‚îÄ‚îÄ FRIENDS TAB ‚îÄ‚îÄ‚îÄ */
.friends-grid {
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(170px,1fr));
  gap:18px;
}
.friend-card {
  background: var(--card);
  border: 2px solid rgba(255,255,255,0.06);
  padding:20px; text-align:center;
  transition: all 0.3s; cursor:pointer;
}
.friend-card:hover {
  border-color: var(--cyan);
  box-shadow: var(--glow-c);
  transform: translateY(-4px);
}
.friend-avatar {
  width:80px; height:80px; border-radius:50%;
  margin:0 auto 12px;
  display:flex; align-items:center; justify-content:center;
  font-size:2.5rem;
  border:3px solid var(--cyan);
  box-shadow: var(--glow-c);
  background: rgba(0,245,255,0.05);
}
.friend-name { font-size:0.9rem; font-weight:700; color:var(--cyan); margin-bottom:4px; }
.friend-films { font-size:0.7rem; color:#555; margin-bottom:10px; }
.friend-compat {
  font-family:'VT323',monospace; font-size:1.1rem;
  color: var(--yellow); letter-spacing:0.05em;
}

/* ‚îÄ‚îÄ‚îÄ FLOATING GIFS ‚îÄ‚îÄ‚îÄ */
.floating-gif {
  position:fixed;
  font-size:2rem;
  pointer-events:none;
  z-index:100;
  animation: floatDrift 20s ease-in-out infinite;
  opacity:0.4;
  user-select:none;
}
.floating-gif:nth-child(2) { animation-duration:25s; animation-delay:-8s; }
.floating-gif:nth-child(3) { animation-duration:18s; animation-delay:-14s; }
@keyframes floatDrift {
  0%   { transform:translate(0,0) rotate(0deg); }
  25%  { transform:translate(30px,-40px) rotate(10deg); }
  50%  { transform:translate(-20px,20px) rotate(-5deg); }
  75%  { transform:translate(40px,10px) rotate(15deg); }
  100% { transform:translate(0,0) rotate(0deg); }
}

/* ‚îÄ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ‚îÄ */
::-webkit-scrollbar { width:8px; }
::-webkit-scrollbar-track { background:#000; }
::-webkit-scrollbar-thumb { background: var(--magenta); }
::-webkit-scrollbar-thumb:hover { background: var(--cyan); }
</style>
</head>
<body>

<!-- PARTICLE CANVAS -->
<canvas id="bg"></canvas>

<!-- ENTRY SCREEN -->
<div id="entry">
  <h1>DIEGO'S SPACE</h1>
  <p>‚òÖ FILM JOURNAL ‚òÖ</p>
  <button id="enterBtn" onclick="enterSite()">[ ENTER THE VOID ]</button>
</div>

<!-- SITE -->
<div id="site">
  <!-- FLOATING DECO -->
  <div class="floating-gif" style="top:20%;left:2%">üé¨</div>
  <div class="floating-gif" style="top:60%;right:3%">üìº</div>
  <div class="floating-gif" style="top:40%;left:96%">üåô</div>

  <!-- NAV -->
  <nav>
    <div class="nav-logo">‚òÖ DIEGO'S SPACE</div>
    <div class="nav-tabs" id="navTabs">
      <button class="tab-btn active" onclick="switchTab('home')">HOME</button>
      <button class="tab-btn" onclick="switchTab('films')">FILMS</button>
      <button class="tab-btn" onclick="switchTab('diary')">DIARY</button>
      <button class="tab-btn" onclick="switchTab('watchlist')">WATCHLIST</button>
      <button class="tab-btn" onclick="switchTab('friends')">FRIENDS</button>
      <button class="tab-btn" onclick="switchTab('guestbook')">GUESTBOOK</button>
      <button class="tab-btn" onclick="switchTab('stats')">STATS</button>
    </div>
  </nav>

  <!-- ‚îÄ‚îÄ‚îÄ HOME ‚îÄ‚îÄ‚îÄ -->
  <div class="tab-pane active" id="pane-home">
    <div class="home-grid">
      <!-- PROFILE SIDEBAR -->
      <div>
        <div class="profile-card">
          <div class="avatar-wrap">
            <div class="avatar-placeholder">üéû</div>
          </div>
          <div class="profile-name">DIEGO</div>
          <div class="profile-handle">@diego ¬∑ member since 2024</div>
          <div class="profile-bio">
            obsessed with cinema. lover of practical effects, uncomfortable silences, and films that make you stare at the ceiling after. probably rewatching Mulholland Drive again.
          </div>
          <div class="profile-stats">
            <div class="stat-box">
              <span class="stat-num">142</span>
              <span class="stat-lbl">Films</span>
            </div>
            <div class="stat-box">
              <span class="stat-num">89</span>
              <span class="stat-lbl">Reviews</span>
            </div>
            <div class="stat-box">
              <span class="stat-num">34</span>
              <span class="stat-lbl">Lists</span>
            </div>
          </div>
        </div>

        <div class="now-playing" style="margin-top:15px;">
          <div class="now-playing-label">
            <div class="dot-pulse"></div>
            NOW PLAYING
          </div>
          <div class="np-track">
            <span>MCR ‚Äî Welcome to the Black Parade &nbsp;&nbsp;‚òÖ&nbsp;&nbsp; Interpol ‚Äî Obstacle 1 &nbsp;&nbsp;‚òÖ&nbsp;&nbsp; Beach House ‚Äî Space Song &nbsp;&nbsp;‚òÖ&nbsp;&nbsp; Nine Inch Nails ‚Äî Hurt &nbsp;&nbsp;‚òÖ&nbsp;&nbsp;</span>
          </div>
        </div>

        <div style="margin-top:15px; background:var(--card); border:2px solid rgba(255,45,120,0.2); padding:15px;">
          <div class="widget-title" style="font-family:'VT323',monospace;font-size:1.1rem;color:var(--cyan);letter-spacing:.15em;margin-bottom:10px;">CURRENT MOOD</div>
          <div style="font-size:2rem; text-align:center; letter-spacing:8px;">üò∂‚Äçüå´Ô∏èüé¨üåô</div>
          <div style="font-size:0.72rem; color:#555; text-align:center; margin-top:8px; font-style:italic;">"film is a mirror reflecting our dreams"</div>
        </div>

        <div style="margin-top:15px; background:var(--card); border:2px solid rgba(255,242,0,0.2); padding:15px;">
          <div style="font-family:'VT323',monospace;font-size:1.1rem;color:var(--yellow);letter-spacing:.15em;margin-bottom:10px;">VISITOR COUNT</div>
          <div style="font-family:'VT323',monospace; font-size:2.5rem; color:var(--green); letter-spacing:6px; text-shadow: 0 0 10px var(--green);" id="visitorCount">004729</div>
        </div>
      </div>

      <!-- HOME RIGHT -->
      <div class="home-right">
        <div class="widget">
          <div class="widget-title">RECENTLY WATCHED</div>
          <div class="recent-films" id="recentFilms"></div>
        </div>

        <div class="widget">
          <div class="widget-title">BLOG / THOUGHTS</div>
          <div class="blog-preview">
            <div class="blog-entry">
              <div class="blog-date">FEB 12, 2025</div>
              <h4>why Mulholland Drive changed the way I watch films</h4>
              <p>Lynch doesn't give you answers. he gives you feelings that don't have names yet. I've watched this 6 times and I'm still not ready to talk about it properly...</p>
            </div>
            <div class="blog-entry">
              <div class="blog-date">FEB 08, 2025</div>
              <h4>ranking every Kubrick film after my marathon</h4>
              <p>took me two weeks and I think I need therapy. The Shining at #1 is not up for debate. fight me in the guestbook...</p>
            </div>
            <div class="blog-entry">
              <div class="blog-date">JAN 30, 2025</div>
              <h4>horror films that actually scared me (a short list)</h4>
              <p>I don't scare easy. Hereditary made me leave the lights on for a week. Midsommar made me afraid of flowers. The menu made me reconsider fine dining...</p>
            </div>
            <div class="blog-entry">
              <div class="blog-date">JAN 22, 2025</div>
              <h4>2024 in film: my personal favorites</h4>
              <p>a year that gave us so much. Longlegs was overhyped, Nosferatu was everything, and I'm still thinking about The Substance. what a year to be a freak...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ FILMS ‚îÄ‚îÄ‚îÄ -->
  <div class="tab-pane" id="pane-films">
    <div class="sec-title magenta">MY FILMS <span style="font-size:0.6em;color:#555;">142 LOGGED</span></div>
    <div class="films-toolbar">
      <input type="text" id="movieSearch" placeholder="SEARCH FILMS..." oninput="filterMovies()">
      <button class="filter-btn active" onclick="filterGenre('All',this)">ALL</button>
      <button class="filter-btn" onclick="filterGenre('Horror',this)">HORROR</button>
      <button class="filter-btn" onclick="filterGenre('Sci-Fi',this)">SCI-FI</button>
      <button class="filter-btn" onclick="filterGenre('Drama',this)">DRAMA</button>
      <button class="filter-btn" onclick="filterGenre('Thriller',this)">THRILLER</button>
    </div>
    <div class="movie-grid" id="movieGrid"></div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ DIARY ‚îÄ‚îÄ‚îÄ -->
  <div class="tab-pane" id="pane-diary">
    <div class="sec-title cyan">FILM DIARY</div>
    <div class="diary-timeline" id="diaryTimeline"></div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ WATCHLIST ‚îÄ‚îÄ‚îÄ -->
  <div class="tab-pane" id="pane-watchlist">
    <div class="sec-title magenta">WATCHLIST <span style="font-size:0.5em;color:#555;">27 FILMS</span></div>
    <p style="color:#555; font-size:0.82rem; margin-bottom:25px;">films i need to see before i die. or at least before this month ends.</p>
    <div class="watchlist-grid" id="watchlistGrid"></div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ FRIENDS ‚îÄ‚îÄ‚îÄ -->
  <div class="tab-pane" id="pane-friends">
    <div class="sec-title cyan">FILM FRIENDS</div>
    <p style="color:#555; font-size:0.82rem; margin-bottom:25px;">people i trust to recommend films and not ruin them in the first sentence.</p>
    <div class="friends-grid" id="friendsGrid"></div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ GUESTBOOK ‚îÄ‚îÄ‚îÄ -->
  <div class="tab-pane" id="pane-guestbook">
    <div class="sec-title magenta" style="color:var(--green);text-shadow:0 0 20px var(--green);">GUESTBOOK</div>
    <div class="guestbook-form">
      <h3>// SIGN MY GUESTBOOK</h3>
      <div class="gb-inputs">
        <input class="gb-input" id="gbName" placeholder="YOUR NAME">
        <input class="gb-input" id="gbFilm" placeholder="FAVORITE FILM RIGHT NOW">
      </div>
      <textarea class="gb-textarea" id="gbMsg" placeholder="LEAVE A MESSAGE, A REVIEW, A THREAT, WHATEVER..."></textarea>
      <div style="display:flex;align-items:center;gap:20px;flex-wrap:wrap;">
        <button class="gb-submit" onclick="submitGuestbook()">[ SIGN IT ]</button>
        <span style="font-size:0.75rem;color:#444;">your message will appear below</span>
      </div>
    </div>
    <div id="gbEntries"></div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ STATS ‚îÄ‚îÄ‚îÄ -->
  <div class="tab-pane" id="pane-stats">
    <div class="sec-title cyan">MY FILM STATS</div>
    <div class="stats-grid">
      <div class="stat-card"><span class="big-num">142</span><div class="stat-desc">Films Watched</div></div>
      <div class="stat-card"><span class="big-num">284</span><div class="stat-desc">Hours Watched</div></div>
      <div class="stat-card"><span class="big-num">89</span><div class="stat-desc">Reviews Written</div></div>
      <div class="stat-card"><span class="big-num" style="color:var(--magenta);">4.1</span><div class="stat-desc">Avg Rating</div></div>
      <div class="stat-card"><span class="big-num" style="color:var(--cyan);">34</span><div class="stat-desc">Watchlist</div></div>
      <div class="stat-card"><span class="big-num" style="color:var(--green);">12</span><div class="stat-desc">This Month</div></div>
    </div>

    <div class="bar-chart">
      <h3>// GENRE BREAKDOWN</h3>
      <div id="genreChart"></div>
    </div>

    <div class="bar-chart">
      <h3>// RATING DISTRIBUTION</h3>
      <div id="ratingChart"></div>
    </div>

    <div class="bar-chart">
      <h3>// FILMS BY DECADE</h3>
      <div id="decadeChart"></div>
    </div>
  </div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const MOVIES = [
  {id:1,  title:"Mulholland Drive",    year:2001, rating:5,   genre:"Thriller",   emoji:"üîµ"},
  {id:2,  title:"The Shining",         year:1980, rating:5,   genre:"Horror",     emoji:"ü™ì"},
  {id:3,  title:"Hereditary",          year:2018, rating:4.5, genre:"Horror",     emoji:"üëÅ"},
  {id:4,  title:"2001: A Space Odyssey",year:1968,rating:5,   genre:"Sci-Fi",     emoji:"üõ∏"},
  {id:5,  title:"Blade Runner 2049",   year:2017, rating:4.5, genre:"Sci-Fi",     emoji:"üåß"},
  {id:6,  title:"Midsommar",           year:2019, rating:4,   genre:"Horror",     emoji:"üå∏"},
  {id:7,  title:"Annihilation",        year:2018, rating:4.5, genre:"Sci-Fi",     emoji:"üåø"},
  {id:8,  title:"There Will Be Blood", year:2007, rating:5,   genre:"Drama",      emoji:"üõ¢"},
  {id:9,  title:"No Country for Old Men",year:2007,rating:5,  genre:"Thriller",   emoji:"üí∞"},
  {id:10, title:"Parasite",            year:2019, rating:5,   genre:"Thriller",   emoji:"üè†"},
  {id:11, title:"The Lighthouse",      year:2019, rating:4,   genre:"Horror",     emoji:"‚ö°"},
  {id:12, title:"Drive",               year:2011, rating:4.5, genre:"Thriller",   emoji:"üöó"},
  {id:13, title:"Eternal Sunshine",    year:2004, rating:4.5, genre:"Drama",      emoji:"üíô"},
  {id:14, title:"Requiem for a Dream", year:2000, rating:4,   genre:"Drama",      emoji:"üíâ"},
  {id:15, title:"Under the Skin",      year:2014, rating:4,   genre:"Sci-Fi",     emoji:"üåë"},
  {id:16, title:"The Witch",           year:2015, rating:4,   genre:"Horror",     emoji:"üêê"},
  {id:17, title:"Mandy",               year:2018, rating:4,   genre:"Horror",     emoji:"üî•"},
  {id:18, title:"Heat",                year:1995, rating:5,   genre:"Thriller",   emoji:"üè¶"},
  {id:19, title:"Synecdoche, New York",year:2008, rating:4.5, genre:"Drama",      emoji:"üé≠"},
  {id:20, title:"The Substance",       year:2024, rating:4.5, genre:"Horror",     emoji:"ü©∏"},
  {id:21, title:"Nosferatu",           year:2024, rating:4.5, genre:"Horror",     emoji:"ü¶á"},
  {id:22, title:"Alien",               year:1979, rating:5,   genre:"Sci-Fi",     emoji:"üëæ"},
  {id:23, title:"Oldboy",              year:2003, rating:5,   genre:"Thriller",   emoji:"üî®"},
  {id:24, title:"Perfect Blue",        year:1997, rating:5,   genre:"Thriller",   emoji:"üîÆ"},
  {id:25, title:"Prisoners",           year:2013, rating:4.5, genre:"Thriller",   emoji:"üî¶"},
  {id:26, title:"Come and See",        year:1985, rating:5,   genre:"Drama",      emoji:"üå≤"},
  {id:27, title:"Pan's Labyrinth",     year:2006, rating:5,   genre:"Drama",      emoji:"üåπ"},
  {id:28, title:"Mad Max: Fury Road",  year:2015, rating:4.5, genre:"Sci-Fi",     emoji:"üöô"},
  {id:29, title:"Burning",             year:2018, rating:4.5, genre:"Drama",      emoji:"üåæ"},
  {id:30, title:"Ex Machina",          year:2014, rating:4,   genre:"Sci-Fi",     emoji:"ü§ñ"},
];

const DIARY_ENTRIES = [
  {date:"FEB 14, 2025", title:"Nosferatu", year:2024, rating:4.5, review:"Robert Eggers crafts the most visually stunning horror film in years. Lily-Rose Depp's performance is haunting in the best possible way. The practical effects alone deserve an award. Watched it twice in one week.", tags:["gothic","atmospheric","stunning"]},
  {date:"FEB 10, 2025", title:"The Substance", year:2024, rating:4.5, review:"Body horror at its most unhinged. Demi Moore gives a career-defining performance and the third act goes completely off the rails in the best way. I screamed. My neighbors are concerned.", tags:["body horror","feminist","unhinged"]},
  {date:"FEB 05, 2025", title:"Mulholland Drive", year:2001, rating:5, review:"My 6th watch. Still discovering new things. Lynch created something that lives in your subconscious. The diner scene alone is one of the greatest moments in cinema history. I think about it constantly.", tags:["surreal","masterpiece","dream-logic"]},
  {date:"JAN 28, 2025", title:"Come and See", year:1985, rating:5, review:"I was not prepared. No film has shaken me the way this did. The aging of Flyora's face throughout mirrors the death of innocence. Essential cinema. Devastating.", tags:["war","devastating","essential"]},
  {date:"JAN 20, 2025", title:"Synecdoche, New York", year:2008, rating:4.5, review:"Kaufman's most ambitious film about life, death, creativity, and the impossibility of capturing reality. Gets sadder every year I age. The ending destroyed me.", tags:["existential","sad","ambitious"]},
  {date:"JAN 15, 2025", title:"Perfect Blue", year:1997, rating:5, review:"Satoshi Kon predicted the internet age, parasocial relationships, and the commodification of female identity all in 1997. Perfect Blue makes Black Swan look like a student film.", tags:["anime","psychological","masterpiece"]},
];

const WATCHLIST = [
  {title:"Inland Empire",     year:2006, emoji:"üé≠"},
  {title:"Lost Highway",      year:1997, emoji:"üåí"},
  {title:"Eyes Wide Shut",    year:1999, emoji:"üëÅ"},
  {title:"A Ghost Story",     year:2017, emoji:"üëª"},
  {title:"The Wailing",       year:2016, emoji:"üåß"},
  {title:"Climax",            year:2018, emoji:"üî¥"},
  {title:"Cure",              year:1997, emoji:"ü´ô"},
  {title:"In the Mouth of Madness", year:1994, emoji:"üìñ"},
  {title:"Antichrist",        year:2009, emoji:"ü¶ä"},
  {title:"Funny Games",       year:1997, emoji:"üñê"},
  {title:"Possession",        year:1981, emoji:"üêô"},
  {title:"Good Time",         year:2017, emoji:"üåÉ"},
  {title:"The Favourite",     year:2018, emoji:"üêá"},
  {title:"Certified Copy",    year:2010, emoji:"üñº"},
  {title:"Triangle of Sadness",year:2022,emoji:"üõ•"},
];

const FRIENDS = [
  {name:"MAYA",    emoji:"üåô", films:203, compat:"94%", vibe:"arthouse & horror"},
  {name:"FELIX",   emoji:"üéû", films:341, compat:"87%", vibe:"european cinema"},
  {name:"SAM",     emoji:"üî•", films:178, compat:"81%", vibe:"80s everything"},
  {name:"PRIYA",   emoji:"‚ö°", films:256, compat:"79%", vibe:"sci-fi & animation"},
  {name:"CARLOS",  emoji:"üé≠", films:92,  compat:"73%", vibe:"new releases"},
  {name:"ZORA",    emoji:"üå∏", films:445, compat:"88%", vibe:"horror & extreme"},
];

const DEFAULT_GB = [
  {name:"MAYA", film:"Come and See", msg:"your taste in film is genuinely unmatched. change my mind.", date:"FEB 12, 2025", mood:"üåô"},
  {name:"FELIX", film:"Certified Copy", msg:"still waiting for you to watch Jeanne Dielman. you're not ready but neither am I.", date:"FEB 09, 2025", mood:"üéû"},
  {name:"ANONYMOUS", film:"Hereditary", msg:"found this through a link somewhere. your blog post about Lynch made me cry in a good way.", date:"FEB 06, 2025", mood:"üëÅ"},
  {name:"ZORA", film:"The Substance", msg:"we NEED to do a body horror marathon. I will bring the snacks and the emotional damage.", date:"JAN 31, 2025", mood:"ü©∏"},
];

// ‚îÄ‚îÄ‚îÄ RATINGS STORAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const savedRatings = JSON.parse(localStorage.getItem('diegoRatings') || '{}');

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function enterSite() {
  const e = document.getElementById('entry');
  e.style.transition = 'opacity 0.8s, transform 0.8s';
  e.style.opacity = '0';
  e.style.transform = 'scale(1.05)';
  setTimeout(() => {
    e.style.display = 'none';
    document.getElementById('site').style.display = 'block';
    initAll();
  }, 800);
}

function initAll() {
  initBG();
  populateRecent();
  populateMovies();
  populateDiary();
  populateWatchlist();
  populateFriends();
  populateGuestbook();
  populateCharts();
  animateVisitor();
  animateBars();
}

// ‚îÄ‚îÄ‚îÄ BACKGROUND PARTICLES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function initBG() {
  const c = document.getElementById('bg');
  const ctx = c.getContext('2d');
  c.width = window.innerWidth;
  c.height = window.innerHeight;
  window.addEventListener('resize', () => { c.width = window.innerWidth; c.height = window.innerHeight; });

  const particles = Array.from({length:80}, () => ({
    x: Math.random() * c.width,
    y: Math.random() * c.height,
    r: Math.random() * 1.5 + 0.3,
    vx: (Math.random() - 0.5) * 0.3,
    vy: (Math.random() - 0.5) * 0.3,
    color: ['#ff2d78','#00f5ff','#fff200','#39ff14'][Math.floor(Math.random()*4)],
    alpha: Math.random() * 0.6 + 0.1,
  }));

  function draw() {
    ctx.clearRect(0,0,c.width,c.height);
    ctx.fillStyle = '#04040a';
    ctx.fillRect(0,0,c.width,c.height);
    particles.forEach(p => {
      p.x += p.vx; p.y += p.vy;
      if (p.x < 0) p.x = c.width;
      if (p.x > c.width) p.x = 0;
      if (p.y < 0) p.y = c.height;
      if (p.y > c.height) p.y = 0;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fillStyle = p.color;
      ctx.globalAlpha = p.alpha;
      ctx.fill();
    });
    ctx.globalAlpha = 1;
    requestAnimationFrame(draw);
  }
  draw();
}

// ‚îÄ‚îÄ‚îÄ VISITOR COUNTER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function animateVisitor() {
  const el = document.getElementById('visitorCount');
  let count = 4700 + Math.floor(Math.random()*100);
  el.textContent = String(count).padStart(6,'0');
}

// ‚îÄ‚îÄ‚îÄ TAB SWITCHING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function switchTab(id) {
  document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('pane-' + id).classList.add('active');
  const btns = document.querySelectorAll('.tab-btn');
  const map = {home:0, films:1, diary:2, watchlist:3, friends:4, guestbook:5, stats:6};
  btns[map[id]].classList.add('active');
  if (id === 'stats') setTimeout(animateBars, 100);
}

// ‚îÄ‚îÄ‚îÄ STARS HTML ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function starsHtml(rating, id, interactive=false) {
  const full = Math.floor(rating);
  const half = rating % 1 >= 0.5;
  let h = '';
  for (let i=1; i<=5; i++) {
    const lit = i <= full || (i === full+1 && half);
    if (interactive) {
      h += `<span class="star ${lit?'lit':''}" onclick="setRating(${id},${i})" onmouseover="previewRating(${id},${i})" onmouseout="resetPreview(${id})">‚òÖ</span>`;
    } else {
      h += `<span style="color:${lit?'#fff200':'#333'};font-size:.8rem">‚òÖ</span>`;
    }
  }
  return h;
}

function setRating(id, stars) {
  savedRatings[id] = stars;
  localStorage.setItem('diegoRatings', JSON.stringify(savedRatings));
  renderStarsFor(id, stars);
}

function renderStarsFor(id, rating) {
  const el = document.querySelector(`.star-rating[data-id="${id}"]`);
  if (!el) return;
  el.querySelectorAll('.star').forEach((s,i) => {
    s.classList.toggle('lit', i < rating);
  });
}

function previewRating(id, n) {
  const el = document.querySelector(`.star-rating[data-id="${id}"]`);
  if (!el) return;
  el.querySelectorAll('.star').forEach((s,i) => s.classList.toggle('lit', i < n));
}

function resetPreview(id) {
  const r = savedRatings[id] || MOVIES.find(m=>m.id===id)?.rating || 0;
  renderStarsFor(id, r);
}

// ‚îÄ‚îÄ‚îÄ RECENT FILMS (HOME) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function populateRecent() {
  const el = document.getElementById('recentFilms');
  const recent = MOVIES.slice(0,10);
  el.innerHTML = recent.map(m => `
    <div class="recent-film-card" title="${m.title} (${m.year})">
      <div class="poster-placeholder">
        <span class="film-emoji">${m.emoji}</span>
        <span class="film-title-small">${m.title}</span>
      </div>
      <div class="film-rating-badge">
        <div class="stars-small">${'‚òÖ'.repeat(Math.round(m.rating))}${'‚òÜ'.repeat(5-Math.round(m.rating))}</div>
      </div>
    </div>
  `).join('');
}

// ‚îÄ‚îÄ‚îÄ MOVIES GRID ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let activeGenre = 'All';

function populateMovies(list = MOVIES) {
  const grid = document.getElementById('movieGrid');
  grid.innerHTML = list.map(m => {
    const r = savedRatings[m.id] || m.rating;
    return `
    <div class="movie-card" data-genre="${m.genre}">
      <div class="poster-ph">
        <span class="big-emoji">${m.emoji}</span>
        <span class="ph-title">${m.title}</span>
      </div>
      <div class="movie-overlay">
        <div class="movie-card-title">${m.title}</div>
        <div class="movie-card-year">${m.year}</div>
        <div class="star-rating" data-id="${m.id}">
          ${[1,2,3,4,5].map(i=>`<span class="star ${i<=Math.floor(r)?'lit':''}" onclick="setRating(${m.id},${i})" onmouseover="previewRating(${m.id},${i})" onmouseout="resetPreview(${m.id})">‚òÖ</span>`).join('')}
        </div>
      </div>
      <div class="bottom-info">
        <span>${m.year}</span>
        <span class="genre-tag">${m.genre}</span>
      </div>
    </div>`;
  }).join('');
}

function filterMovies() {
  const q = document.getElementById('movieSearch').value.toLowerCase();
  const filtered = MOVIES.filter(m =>
    (activeGenre === 'All' || m.genre === activeGenre) &&
    (m.title.toLowerCase().includes(q) || String(m.year).includes(q))
  );
  populateMovies(filtered);
}

function filterGenre(genre, btn) {
  activeGenre = genre;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  filterMovies();
}

// ‚îÄ‚îÄ‚îÄ DIARY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function populateDiary() {
  const el = document.getElementById('diaryTimeline');
  el.innerHTML = DIARY_ENTRIES.map(e => `
    <div class="diary-entry">
      <div class="diary-card">
        <div class="diary-meta">
          <span class="diary-date">${e.date}</span>
          <span class="diary-film-title">${e.title}</span>
          <span style="color:#555;font-size:.75rem">${e.year}</span>
          <span class="diary-stars">${'‚òÖ'.repeat(Math.floor(e.rating))}${e.rating%1?'¬Ω':''}</span>
        </div>
        <div class="diary-review">${e.review}</div>
        <div class="diary-tags">${e.tags.map(t=>`<span class="tag">#${t}</span>`).join('')}</div>
      </div>
    </div>
  `).join('');
}

// ‚îÄ‚îÄ‚îÄ WATCHLIST ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function populateWatchlist() {
  const el = document.getElementById('watchlistGrid');
  el.innerHTML = WATCHLIST.map((w,i) => `
    <div class="wl-card">
      <div class="poster-ph">
        <span class="big-emoji">${w.emoji}</span>
        <span class="wl-title">${w.title}<br><span style="color:#444;font-size:.6rem">${w.year}</span></span>
      </div>
      ${i < 3 ? '<span class="wl-badge">PRIORITY</span>' : ''}
    </div>
  `).join('');
}

// ‚îÄ‚îÄ‚îÄ FRIENDS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function populateFriends() {
  const el = document.getElementById('friendsGrid');
  el.innerHTML = FRIENDS.map(f => `
    <div class="friend-card">
      <div class="friend-avatar">${f.emoji}</div>
      <div class="friend-name">${f.name}</div>
      <div class="friend-films">${f.films} films ¬∑ ${f.vibe}</div>
      <div class="friend-compat">COMPAT: ${f.compat}</div>
    </div>
  `).join('');
}

// ‚îÄ‚îÄ‚îÄ GUESTBOOK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let gbEntries = [...DEFAULT_GB];

function populateGuestbook() {
  const el = document.getElementById('gbEntries');
  el.innerHTML = gbEntries.map(e => `
    <div class="gb-entry">
      <div class="gb-entry-header">
        <div style="display:flex;align-items:center;gap:10px;">
          <span class="gb-mood">${e.mood}</span>
          <span class="gb-name">${e.name}</span>
          <span style="font-size:.7rem;color:#444;">‚ô• ${e.film}</span>
        </div>
        <span class="gb-date">${e.date}</span>
      </div>
      <div class="gb-text">${e.msg}</div>
    </div>
  `).join('');
}

function submitGuestbook() {
  const name = document.getElementById('gbName').value.trim() || 'ANON';
  const film = document.getElementById('gbFilm').value.trim() || '???';
  const msg  = document.getElementById('gbMsg').value.trim();
  if (!msg) return;
  const moods = ['üé¨','üìº','üåô','‚ö°','üî•','üëÅ','üíÄ','üå∏'];
  gbEntries.unshift({
    name: name.toUpperCase(),
    film,
    msg,
    date: new Date().toLocaleDateString('en-US', {month:'short',day:'2-digit',year:'numeric'}).toUpperCase(),
    mood: moods[Math.floor(Math.random()*moods.length)],
  });
  document.getElementById('gbName').value = '';
  document.getElementById('gbFilm').value = '';
  document.getElementById('gbMsg').value = '';
  populateGuestbook();
}

// ‚îÄ‚îÄ‚îÄ STATS CHARTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function populateCharts() {
  const genres = [
    {label:'Horror',    pct:35}, {label:'Thriller', pct:25},
    {label:'Sci-Fi',    pct:20}, {label:'Drama',     pct:15},
    {label:'Other',     pct:5},
  ];
  const ratings = [
    {label:'‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (5)',  pct:22}, {label:'‚òÖ‚òÖ‚òÖ‚òÖ¬Ω (4.5)',pct:30},
    {label:'‚òÖ‚òÖ‚òÖ‚òÖ  (4)',  pct:28}, {label:'‚òÖ‚òÖ‚òÖ¬Ω  (3.5)',pct:12},
    {label:'‚òÖ‚òÖ‚òÖ   (3)',  pct:6 }, {label:'< 3',       pct:2 },
  ];
  const decades = [
    {label:'2020s', pct:28},{label:'2010s', pct:35},
    {label:'2000s', pct:18},{label:'1990s', pct:10},
    {label:'1980s', pct:6 },{label:'1970s', pct:2 },{label:'Pre-70', pct:1},
  ];

  function chart(id, data) {
    document.getElementById(id).innerHTML = data.map(d => `
      <div class="bar-row">
        <span class="bar-label">${d.label}</span>
        <div class="bar-track"><div class="bar-fill" style="width:0%" data-pct="${d.pct}%"></div></div>
        <span class="bar-val">${d.pct}%</span>
      </div>
    `).join('');
  }
  chart('genreChart', genres);
  chart('ratingChart', ratings);
  chart('decadeChart', decades);
}

function animateBars() {
  document.querySelectorAll('.bar-fill').forEach(b => {
    b.style.width = b.dataset.pct;
  });
}
</script>
</body>
</html
