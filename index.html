<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIEGO'S SPACE // FILM DIARY</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-color: #000000;
            --primary: #ff00ff;
            --secondary: #00ff00;
            --accent: #00ffff;
            --text: #ffffff;
            --glass: rgba(15,15,15,0.95);
            --crt: none;
        }
        body {
            font-family: 'Comic Sans MS', cursive;
            background: var(--bg-color);
            color: var(--text);
            overflow-x: hidden;
            image-rendering: pixelated;
            position: relative;
        }
        .crt::after {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(transparent 0px, transparent 2px, rgba(0,255,0,0.03) 2px, rgba(0,255,0,0.03) 4px);
            pointer-events: none;
            z-index: 99999;
            mix-blend-mode: overlay;
            animation: scanline 4s linear infinite;
        }
        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
        .custom-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
            background-size: cover; background-position: center; opacity: 0.25; filter: contrast(1.3) brightness(0.8);
        }
        .falling-objects, .stickers { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; }
        .falling-item {
            position: absolute; font-size: 28px; animation: fall linear infinite; opacity: 0.85; text-shadow: 0 0 15px var(--primary);
        }
        @keyframes fall { to { transform: translateY(120vh) rotate(720deg); } }
        .sticker {
            position: absolute; font-size: 60px; animation: float 4s ease-in-out infinite; text-shadow: 0 0 20px #fff;
        }
        @keyframes float { 50% { transform: translateY(-30px) rotate(10deg); } }

        .cursor-trail {
            position: fixed; pointer-events: none; width: 30px; height: 30px; border-radius: 50%;
            background: radial-gradient(circle, var(--primary), transparent 70%);
            z-index: 99999; animation: trailPop 800ms forwards;
        }
        @keyframes trailPop { to { opacity: 0; transform: scale(3); } }

        .entry-screen {
            position: fixed; inset: 0; background: linear-gradient(45deg, #110011, #001111, #110011);
            display: flex; align-items: center; justify-content: center; z-index: 999999;
            transition: opacity 1.2s;
        }
        .entry-screen.hidden { opacity: 0; pointer-events: none; }
        .entry-logo {
            font-size: clamp(4rem, 15vw, 12rem); font-weight: 900; font-family: Impact, sans-serif;
            background: linear-gradient(90deg, #ff00ff, #00ffff, #ff00ff);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 0 60px #ff00ff, 0 0 120px #00ffff; animation: glitch 1.5s infinite, hue 4s linear infinite;
        }
        @keyframes glitch {
            0%,100% { transform: translate(0); }
            20% { transform: translate(-3px,3px); }
            40% { transform: translate(3px,-3px); }
        }
        @keyframes hue { to { filter: hue-rotate(360deg); } }

        .enter-btn {
            margin-top: 30px; padding: 25px 80px; font-size: 2rem; font-family: Impact;
            background: linear-gradient(#ff00ff, #00ffff); color: #000; border: 6px solid #fff;
            text-transform: uppercase; cursor: pointer; box-shadow: 0 0 50px #ff00ff;
            transition: all .2s;
        }
        .enter-btn:hover { transform: scale(1.15) rotate(5deg); box-shadow: 0 0 80px #00ffff; }

        .top-bar {
            background: linear-gradient(#ff00ff, #8800aa); padding: 12px; text-align: center;
            border-bottom: 6px solid #00ffff; box-shadow: 0 0 30px #ff00ff;
        }
        .top-bar h1 { font-size: 3.5rem; color: #000; text-shadow: 4px 4px #00ffff; font-family: Impact; }

        nav {
            background: rgba(0,0,0,0.9); border-bottom: 4px solid var(--accent);
            display: flex; justify-content: center; gap: 40px; padding: 15px 0; flex-wrap: wrap;
        }
        nav button {
            background: transparent; border: 3px solid var(--primary); color: #fff; padding: 12px 30px;
            font-size: 1.3rem; font-weight: 900; cursor: pointer; transition: .3s;
        }
        nav button.active, nav button:hover {
            background: var(--primary); color: #000; box-shadow: 0 0 30px var(--accent);
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 20px; position: relative; z-index: 10; }

        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.6s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .profile-section, .glass {
            background: var(--glass); border: 5px solid var(--primary); padding: 25px;
            margin-bottom: 25px; box-shadow: 0 0 40px var(--primary);
        }

        .profile-pic {
            width: 180px; height: 180px; border: 8px solid var(--accent); border-radius: 50%;
            object-fit: cover; box-shadow: 0 0 40px #00ffff; transition: .4s;
        }
        .profile-pic:hover { transform: rotate(8deg) scale(1.1); }

        /* FILM DIARY - THE REAL SHIT */
        .film-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px;
        }
        .film-card {
            background: #111; border: 4px solid var(--accent); overflow: hidden;
            transition: .3s; position: relative; box-shadow: 0 0 25px var(--accent);
        }
        .film-card:hover { transform: scale(1.08) rotate(2deg); box-shadow: 0 0 60px #ff00ff; }
        .film-card img {
            width: 100%; height: 260px; object-fit: cover; border-bottom: 4px solid var(--secondary);
        }
        .film-info {
            padding: 12px; text-align: center;
        }
        .film-title { font-size: 1.1rem; font-weight: 900; margin-bottom: 6px; color: var(--primary); }
        .stars { color: #ffff00; font-size: 1.4rem; letter-spacing: 2px; }
        .film-date { font-size: 0.85rem; color: var(--accent); }

        /* BLOG POSTS */
        .blog-post {
            background: var(--glass); border: 5px solid var(--primary); padding: 25px;
            margin-bottom: 25px; box-shadow: 0 0 40px var(--primary);
        }

        /* GUESTBOOK */
        .guestbook { max-height: 500px; overflow-y: auto; }
        .guest-entry { background: rgba(0,0,0,0.6); padding: 15px; margin-bottom: 10px; border-left: 6px solid var(--secondary); }

        /* MUSIC */
        .music-player {
            background: var(--glass); border: 5px solid var(--secondary); padding: 25px;
        }
        #yt-player { width: 100%; height: 300px; }

        /* MODALS */
        .modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.97); display: none;
            align-items: center; justify-content: center; z-index: 99999;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: linear-gradient(135deg, #1a001a, #001a1a); border: 6px solid var(--primary);
            padding: 40px; width: 90%; max-width: 620px; max-height: 90vh; overflow-y: auto;
            box-shadow: 0 0 80px #ff00ff;
        }

        button {
            font-family: Impact, sans-serif; font-weight: 900; text-transform: uppercase;
            cursor: pointer; transition: all .2s;
        }
        .floating-btns {
            position: fixed; bottom: 30px; right: 30px; display: flex; flex-direction: column; gap: 18px; z-index: 9999;
        }
        .floating-btn {
            width: 70px; height: 70px; border-radius: 50%; border: 5px solid #fff;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            font-size: 2rem; color: #000; box-shadow: 0 0 40px var(--primary);
        }
        .floating-btn:hover { transform: scale(1.3) rotate(20deg); }

        .marquee {
            background: var(--glass); border: 4px solid var(--accent); padding: 12px;
            overflow: hidden; white-space: nowrap; font-size: 1.4rem; font-weight: 900; color: var(--accent);
        }
        .marquee span { display: inline-block; animation: scroll 25s linear infinite; }
        @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
    </style>
</head>
<body class="crt">

    <div class="custom-bg" id="customBg"></div>
    <div class="falling-objects" id="falling"></div>
    <div class="stickers" id="stickers"></div>

    <!-- ENTRY -->
    <div class="entry-screen" id="entry">
        <div style="text-align:center">
            <div class="entry-logo">DIEGO'S SPACE</div>
            <p style="font-size:2rem;color:#00ffff;margin:20px 0;animation:blink 1s infinite">>>> 2000s CHAOS + FILM DIARY <<<</p>
            <button class="enter-btn" onclick="enterSite()">ENTER THE VOID</button>
        </div>
    </div>

    <div id="main" style="display:none">

        <!-- TOP BAR -->
        <div class="top-bar">
            <h1 id="siteTitle">DIEGO'S SPACE</h1>
        </div>

        <nav>
            <button onclick="switchTab(0)" class="active" id="nav0">HOME</button>
            <button onclick="switchTab(1)" id="nav1">DIARY</button>
            <button onclick="switchTab(2)" id="nav2">BLOG</button>
            <button onclick="switchTab(3)" id="nav3">GUESTS</button>
            <button onclick="switchTab(4)" id="nav4">MUSIC</button>
        </nav>

        <div class="marquee"><span id="marquee">üî• NOW LOGGING FILMS LIKE A PSYCHO üî• LEAVE A GUESTBOOK MESSAGE üî• CUSTOMIZE THIS SHIT üî•</span></div>

        <!-- HOME / PROFILE -->
        <div class="section active container" id="tab0">
            <div class="profile-section" style="display:flex;gap:30px;flex-wrap:wrap">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Diego" id="profilePic" class="profile-pic">
                <div>
                    <h2 style="color:#ff00ff;font-size:3rem">DIEGO</h2>
                    <p id="aboutMe" style="font-size:1.3rem">Kansas City degenerate. Movies, pixels, and 2005 energy. Currently watching everything.</p>
                    <div style="margin-top:20px">
                        <strong>Top 8:</strong><br>
                        <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=1" style="width:60px;height:60px;border:3px solid #00ffff;border-radius:50%">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=2" style="width:60px;height:60px;border:3px solid #00ffff;border-radius:50%">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=3" style="width:60px;height:60px;border:3px solid #00ffff;border-radius:50%">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=4" style="width:60px;height:60px;border:3px solid #00ffff;border-radius:50%">
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass" style="text-align:center">
                <h3 style="color:#00ff00">FILMS LOGGED: <span id="totalFilms" style="font-size:3rem;color:#ffff00">69</span></h3>
                <h3 style="color:#00ff00">AVERAGE RATING: <span id="avgRating" style="font-size:3rem;color:#ffff00">4.2</span> ‚òÖ</h3>
            </div>
        </div>

        <!-- DIARY -->
        <div class="section container" id="tab1">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
                <h2 style="color:#ff00ff;font-size:3rem">FILM DIARY</h2>
                <button onclick="openFilmModal()" style="padding:15px 40px;background:#ff00ff;color:#000;border:4px solid #fff;font-size:1.5rem">+ LOG FILM</button>
            </div>
            <div id="filmGrid" class="film-grid"></div>
        </div>

        <!-- BLOG -->
        <div class="section container" id="tab2">
            <button onclick="openPostModal()" style="padding:15px 40px;background:#00ff00;color:#000;border:4px solid #fff;font-size:1.5rem;margin-bottom:20px">+ NEW POST</button>
            <div id="blogPosts"></div>
        </div>

        <!-- GUESTBOOK -->
        <div class="section container" id="tab3">
            <h2 style="color:#00ffff;font-size:3rem;margin-bottom:20px">GUESTBOOK</h2>
            <div id="guestbook" class="guestbook glass"></div>
            <div style="margin-top:20px">
                <input id="guestName" placeholder="YOUR NAME" style="width:30%;padding:12px;background:#111;border:3px solid #00ffff;color:#fff">
                <input id="guestMsg" placeholder="SAY SOMETHING NICE OR SHIT ON ME" style="width:50%;padding:12px;background:#111;border:3px solid #00ffff;color:#fff">
                <button onclick="addGuestbook()" style="padding:12px 30px;background:#ff00ff;color:#000;border:3px solid #fff">SIGN</button>
            </div>
        </div>

        <!-- MUSIC -->
        <div class="section container" id="tab4">
            <div class="music-player glass">
                <h3 style="color:#00ff00">NOW BLASTING IN YOUR CRAPPY SPEAKERS</h3>
                <input id="ytUrl" placeholder="PASTE YOUTUBE LINK (or spotify whatever)" style="width:100%;padding:15px;margin:15px 0;background:#111;border:4px solid #00ffff;color:white">
                <button onclick="playYT()" style="padding:15px 50px;background:#00ffff;color:#000;border:4px solid #fff">PLAY THIS SHIT</button>
                <button onclick="stopMusic()" style="padding:15px 50px;background:#ff0000;color:#fff;border:4px solid #fff;margin-left:10px">STOP</button>
                <div id="yt-player" style="margin-top:20px"></div>
            </div>
        </div>
    </div>

    <!-- FLOATING -->
    <div class="floating-btns">
        <button class="floating-btn" onclick="openCustomize()" title="CUSTOMIZE">üé®</button>
        <button class="floating-btn" onclick="toggleEffects()" id="effectsBtn">‚ú®</button>
    </div>

    <!-- MODALS -->
    <div class="modal" id="postModal">
        <div class="modal-content">
            <h2 style="color:#ff00ff">NEW BLOG POST</h2>
            <input id="postTitle" placeholder="TITLE" style="width:100%;padding:12px;margin:10px 0;background:#111;border:3px solid #ff00ff;color:white">
            <textarea id="postContent" placeholder="SPILL YOUR GUTS" style="width:100%;height:150px;padding:12px;background:#111;border:3px solid #ff00ff;color:white"></textarea>
            <input id="postGif" placeholder="GIF/IMAGE URL" style="width:100%;padding:12px;margin:10px 0;background:#111;border:3px solid #ff00ff;color:white">
            <div style="display:flex;gap:15px">
                <button onclick="closeModal('postModal')" style="flex:1;padding:20px;background:transparent;border:4px solid #fff;color:white">CANCEL</button>
                <button onclick="createPost()" style="flex:1;padding:20px;background:#ff00ff;color:#000;border:4px solid #fff">POST IT BITCH</button>
            </div>
        </div>
    </div>

    <div class="modal" id="filmModal">
        <div class="modal-content">
            <h2 style="color:#00ffff">LOG A FILM</h2>
            <input id="filmTitle" placeholder="MOVIE TITLE" style="width:100%;padding:12px;margin:8px 0;background:#111;border:3px solid #00ffff;color:white">
            <input id="filmYear" placeholder="YEAR" style="width:100%;padding:12px;margin:8px 0;background:#111;border:3px solid #00ffff;color:white">
            <input id="filmPoster" placeholder="POSTER URL (imgur/direct link)" style="width:100%;padding:12px;margin:8px 0;background:#111;border:3px solid #00ffff;color:white">
            <select id="filmRating" style="width:100%;padding:12px;margin:8px 0;background:#111;border:3px solid #00ffff;color:white">
                <option value="5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</option>
                <option value="4.5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</option>
                <option value="4">‚òÖ‚òÖ‚òÖ‚òÖ</option>
                <option value="3.5" selected>‚òÖ‚òÖ‚òÖ‚òÜ</option>
                <option value="3">‚òÖ‚òÖ‚òÖ</option>
                <option value="2.5">‚òÖ‚òÖ‚òÜ</option>
                <option value="2">‚òÖ‚òÖ</option>
                <option value="1.5">‚òÖ‚òÜ</option>
                <option value="1">‚òÖ</option>
                <option value="0.5">¬Ω</option>
            </select>
            <textarea id="filmReview" placeholder="YOUR REVIEW (keep it savage)" style="width:100%;height:120px;padding:12px;background:#111;border:3px solid #00ffff;color:white"></textarea>
            <input type="date" id="watchDate" style="width:100%;padding:12px;margin:8px 0;background:#111;border:3px solid #00ffff;color:white">
            <div style="display:flex;gap:15px;margin-top:20px">
                <button onclick="closeModal('filmModal')" style="flex:1;padding:20px;background:transparent;border:4px solid #fff;color:white">CANCEL</button>
                <button onclick="logFilm()" style="flex:1;padding:20px;background:#00ffff;color:#000;border:4px solid #fff">LOG TO DIARY</button>
            </div>
        </div>
    </div>

    <div class="modal" id="customModal">
        <div class="modal-content">
            <h2 style="color:#ff00ff">CUSTOMIZE THIS MESS</h2>
            <label>Site Title</label><input id="cTitle" value="DIEGO'S SPACE" style="width:100%;padding:10px;margin-bottom:10px">
            <label>Marquee</label><input id="cMarquee" value="üî• NOW LOGGING FILMS LIKE A PSYCHO üî•" style="width:100%;padding:10px;margin-bottom:10px">
            <label>Primary (#ff00ff)</label><input type="color" id="cPrimary" value="#ff00ff">
            <label>Accent (#00ffff)</label><input type="color" id="cAccent" value="#00ffff">
            <label>Background Image URL</label><input id="cBg" placeholder="https://" style="width:100%;padding:10px">
            <button onclick="applyCustom()" style="margin-top:20px;width:100%;padding:20px;background:#00ff00;color:#000;border:5px solid #fff">SAVE &amp; CRASH THE PAGE</button>
            <button onclick="closeModal('customModal')" style="margin-top:10px;width:100%;padding:20px;background:transparent;border:5px solid #fff">CLOSE</button>
        </div>
    </div>

    <script>
        let effectsOn = true;
        let currentTab = 0;
        let films = [];
        let posts = [];
        let guests = [];

        function saveAll() {
            localStorage.setItem('diegosChaos', JSON.stringify({
                films, posts, guests,
                title: document.getElementById('siteTitle').textContent,
                marquee: document.getElementById('marquee').textContent,
                bg: document.getElementById('customBg').style.backgroundImage,
                primary: getComputedStyle(document.documentElement).getPropertyValue('--primary'),
                accent: getComputedStyle(document.documentElement).getPropertyValue('--accent')
            }));
        }

        function loadAll() {
            const data = JSON.parse(localStorage.getItem('diegosChaos') || '{}');
            if (data.films) films = data.films;
            if (data.posts) posts = data.posts;
            if (data.guests) guests = data.guests;

            if (data.title) document.getElementById('siteTitle').textContent = data.title;
            if (data.marquee) document.getElementById('marquee').textContent = data.marquee;
            if (data.bg) document.getElementById('customBg').style.backgroundImage = data.bg;
            if (data.primary) document.documentElement.style.setProperty('--primary', data.primary);
            if (data.accent) document.documentElement.style.setProperty('--accent', data.accent);

            renderFilms();
            renderPosts();
            renderGuests();
            updateStats();
        }

        function enterSite() {
            document.getElementById('entry').classList.add('hidden');
            setTimeout(() => {
                document.getElementById('main').style.display = 'block';
                createFalling();
                createStickers();
                loadAll();
            }, 800);
        }

        function switchTab(n) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('tab'+n).classList.add('active');
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
            document.getElementById('nav'+n).classList.add('active');
            currentTab = n;
        }

        function createFalling() {
            if (!effectsOn) return;
            const c = document.getElementById('falling');
            c.innerHTML = '';
            const emojis = ['‚≠ê','üé•','üçø','üéûÔ∏è','üíÄ','üî•'];
            for (let i = 0; i < 22; i++) {
                const d = document.createElement('div');
                d.className = 'falling-item';
                d.textContent = emojis[Math.floor(Math.random()*emojis.length)];
                d.style.left = Math.random()*100 + '%';
                d.style.animationDuration = (Math.random()*4 + 4) + 's';
                d.style.animationDelay = Math.random()*6 + 's';
                c.appendChild(d);
            }
        }

        function createStickers() {
            const c = document.getElementById('stickers');
            c.innerHTML = '';
            const pos = [{t:'12%',l:'6%'},{t:'22%',r:'8%'},{b:'35%',l:'4%'},{b:'18%',r:'12%'}];
            const em = ['üñ§','üìº','üïπÔ∏è','üåà'];
            pos.forEach((p,i) => {
                const s = document.createElement('div');
                s.className = 'sticker';
                s.textContent = em[i];
                Object.assign(s.style, p);
                s.style.animationDelay = i*0.6 + 's';
                c.appendChild(s);
            });
        }

        function toggleEffects() {
            effectsOn = !effectsOn;
            document.getElementById('effectsBtn').textContent = effectsOn ? '‚ú®' : 'üíÄ';
            if (effectsOn) { createFalling(); createStickers(); }
            else { document.getElementById('falling').innerHTML = ''; document.getElementById('stickers').innerHTML = ''; }
        }

        document.addEventListener('mousemove', e => {
            if (!effectsOn) return;
            const t = document.createElement('div');
            t.className = 'cursor-trail';
            t.style.left = e.pageX + 'px';
            t.style.top = e.pageY + 'px';
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 900);
        });

        // FILMS
        function renderFilms() {
            const g = document.getElementById('filmGrid');
            g.innerHTML = '';
            films.forEach((f,i) => {
                const d = document.createElement('div');
                d.className = 'film-card';
                d.innerHTML = `
                    <img src="${f.poster || 'https://picsum.photos/300/400?random=' + i}" onerror="this.src='https://picsum.photos/300/400'">
                    <div class="film-info">
                        <div class="film-title">\( {f.title} ( \){f.year})</div>
                        <div class="stars">\( {'‚òÖ'.repeat(Math.floor(f.rating))} \){(f.rating % 1 === 0.5 ? '¬Ω' : '')}</div>
                        <div class="film-date">${f.date}</div>
                        <div style="font-size:0.8rem;margin-top:8px;height:42px;overflow:hidden">\( {f.review.substring(0,80)} \){f.review.length>80?'...':''}</div>
                    </div>
                `;
                g.appendChild(d);
            });
        }

        function logFilm() {
            const title = document.getElementById('filmTitle').value || 'Untitled';
            const year = document.getElementById('filmYear').value || '2026';
            const poster = document.getElementById('filmPoster').value;
            const rating = parseFloat(document.getElementById('filmRating').value);
            const review = document.getElementById('filmReview').value || 'No review';
            const date = document.getElementById('watchDate').value || new Date().toISOString().slice(0,10);

            films.unshift({title, year, poster, rating, review, date});
            renderFilms();
            updateStats();
            saveAll();
            closeModal('filmModal');
        }

        function openFilmModal() {
            document.getElementById('filmModal').classList.add('active');
        }

        function updateStats() {
            document.getElementById('totalFilms').textContent = films.length || 69;
            if (films.length === 0) return;
            const avg = (films.reduce((a,f) => a + f.rating, 0) / films.length).toFixed(1);
            document.getElementById('avgRating').textContent = avg;
        }

        // POSTS
        function renderPosts() {
            const c = document.getElementById('blogPosts');
            c.innerHTML = '';
            posts.forEach(p => {
                const d = document.createElement('div');
                d.className = 'blog-post';
                d.innerHTML = `
                    <h2 style="color:#ff00ff">${p.title}</h2>
                    <p>${p.content}</p>
                    \( {p.gif ? `<img src=" \){p.gif}" style="max-width:100%;border:4px solid #00ffff;margin:15px 0">` : ''}
                `;
                c.appendChild(d);
            });
        }

        function createPost() {
            const title = document.getElementById('postTitle').value || 'Untitled Post';
            const content = document.getElementById('postContent').value || 'Empty...';
            const gif = document.getElementById('postGif').value;
            posts.unshift({title, content, gif});
            renderPosts();
            saveAll();
            closeModal('postModal');
        }

        function openPostModal() {
            document.getElementById('postModal').classList.add('active');
        }

        // GUESTBOOK
        function renderGuests() {
            const c = document.getElementById('guestbook');
            c.innerHTML = '';
            guests.forEach(g => {
                const d = document.createElement('div');
                d.className = 'guest-entry';
                d.innerHTML = `<strong style="color:#00ffff">\( {g.name}</strong><br> \){g.msg}`;
                c.appendChild(d);
            });
        }

        function addGuestbook() {
            const name = document.getElementById('guestName').value || 'Anonymous';
            const msg = document.getElementById('guestMsg').value || 'lol';
            if (!msg) return;
            guests.unshift({name, msg});
            renderGuests();
            saveAll();
            document.getElementById('guestMsg').value = '';
        }

        // MUSIC
        let currentYT = null;
        function playYT() {
            const url = document.getElementById('ytUrl').value;
            if (!url) return;
            const vid = url.split('v=')[1] || url.split('/').pop();
            const embed = `https://www.youtube.com/embed/${vid}?autoplay=1`;
            document.getElementById('yt-player').innerHTML = `<iframe width="100%" height="100%" src="${embed}" frameborder="0" allow="autoplay"></iframe>`;
        }
        function stopMusic() {
            document.getElementById('yt-player').innerHTML = '';
        }

        // CUSTOM
        function openCustomize() {
            document.getElementById('customModal').classList.add('active');
        }

        function applyCustom() {
            document.getElementById('siteTitle').textContent = document.getElementById('cTitle').value;
            document.getElementById('marquee').textContent = document.getElementById('cMarquee').value;
            document.documentElement.style.setProperty('--primary', document.getElementById('cPrimary').value);
            document.documentElement.style.setProperty('--accent', document.getElementById('cAccent').value);
            const bg = document.getElementById('cBg').value;
            if (bg) document.getElementById('customBg').style.backgroundImage = `url(${bg})`;
            saveAll();
            closeModal('customModal');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        window.onload = () => {
            loadAll();
            // sample data if empty
            if (films.length === 0) {
                films = [
                    {title:"Dune: Part Two", year:"2024", poster:"https://picsum.photos/id/1015/300/400", rating:4.5, review:"Denis cooked again", date:"2025-02-10"},
                    {title:"The Substance", year:"2024", poster:"https://picsum.photos/id/201/300/400", rating:5, review:"Body horror perfection", date:"2025-02-05"}
                ];
                renderFilms();
                updateStats();
            }
        };
    </script>
</body>
</html>
